plugins {
	id 'java'
	id 'jacoco'
	id 'info.solidsoft.pitest' version '1.15.0'
}

repositories {
	mavenCentral()
}

dependencies {
	testImplementation 'org.junit.jupiter:junit-jupiter:5.10.2'
	testImplementation 'org.assertj:assertj-core:3.25.3'
	testImplementation 'org.junit-pioneer:junit-pioneer:2.2.0'
	pitest 'org.pitest:pitest-junit5-plugin:1.2.1'
}

test {
	useJUnitPlatform()
}

jacocoTestReport {
	reports {
		html.required = true
		xml.required = false
		csv.required = false
	}
}

jacocoTestCoverageVerification {
	violationRules {
		rule {
			limit {
				minimum = 0.5
			}
		}
	}
}

check.dependsOn jacocoTestCoverageVerification

pitest {
	junit5PluginVersion = '1.2.1'
	targetClasses = ['ch.bbw.m450.tictactoe.*']
	targetTests = ['*Test']
	threads = 2
	outputFormats = ['HTML']
	mutationThreshold = 50
}